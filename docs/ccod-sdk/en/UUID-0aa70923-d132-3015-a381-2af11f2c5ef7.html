<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"></meta><meta name="format-detection" content="telephone=no"></meta><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"></meta><meta name="search" content="default"></meta><meta name="use.ic" content="no"></meta><meta name="tocstandalone" content="no"></meta><script type="text/javascript">
			var index;
			var contentLanguage = 'en';
			var enterKey = 'select';
			
					var anchoroption = true;
				
				var fuse_threshold = 0.3;
			
					var local_csh = false;
				
			var useanchorlinks = false;
			</script><title>SDK 2.0.0 - miscellaneous information</title><link rel="stylesheet" type="text/css" href="../css/docbook.css"></link><link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css"></link><link rel="stylesheet" type="text/css" href="../css/bootstrap-theme.min.css"></link><link rel="stylesheet" type="text/css" href="../css/font-awesome.css"></link><link rel="stylesheet" type="text/css" href="../css/roboto.font.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-core-css.css"></link><link rel="stylesheet" type="text/css" href="../css/sm-simple.css"></link><link rel="stylesheet" type="text/css" href="../css/style-print.css"></link><link rel="stylesheet" type="text/css" href="../css/style-common.css"></link><link rel="stylesheet" type="text/css" href="../css/style.css"></link><link rel="stylesheet" type="text/css" href="../css/style-responsive.css"></link><script src="../js/jquery-1.10.2.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.10.3.custom.min.js" type="text/javascript"></script><script src="../js/materialize.min.js" type="text/javascript"></script><script src="../js/bootstrap.min.js" type="text/javascript"></script><script src="../js/purl.js" type="text/javascript"></script><script src="../js/jquery.event.move.js" type="text/javascript"></script><script src="../js/jquery.event.swipe.js" type="text/javascript"></script><script src="../js/jquery.sticky.js" type="text/javascript"></script><script src="../js/respond.min.js" type="text/javascript"></script><script src="../js/script.js" type="text/javascript"></script><script src="../js/clipboard.min.js" type="text/javascript"></script><script src="../js/lunr.js" type="text/javascript"></script><script src="../js/jquery.mark.min.js" type="text/javascript"></script><script src="js/data.js" type="text/javascript"></script><script src="../js/search.js" type="text/javascript"></script><script src="../js/csh.js" type="text/javascript"></script><meta name="generator" content="Paligo"></meta><link rel="prev" href="UUID-636c17aa-7f0d-bffe-e77c-0ffda4bd3d3c.html" title="Known flows launching process"></link><link rel="next" href="UUID-f5224b30-6ab9-7d7e-2758-993c7718b233.html" title="Icons for services"></link><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML" async="async"></script><link rel="icon" href="/favicon.ico" type="image/x-icon"></link><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/styles/default.min.css"></link><script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script><script type="text/javascript">
			$(document).ready(function() {
				
				$('pre:not(.embedcode)').each(function() {
					/**
					 * @type {string}
					 */
					var language = $(this).data('language');

					if (language === 'plaintext' || language === 'text') {
						$(this).addClass(language).addClass('hljs');
						return true;
					}
					else {
						var clone = this.cloneNode(true);
						hljs.highlightBlock(clone);
						$(this).empty().append($(clone).contents());
						$(this).attr("class", $(clone).attr("class"));
					}
				});
			});
			</script></head><body xmlns:php="http://php.net/xsl" data-link-prefix=""><div id="page" class="clearfix"><div id="header"><div class="container"><div id="logotype-container" class="pull-left"><a href="../index.html"><img id="logotype-pageheader" src="../css/image/corporate-logo.png" alt="Corporate logotype" data-role="logotype"></img></a></div><div id="pagetools-container" class="pull-right"><ul id="page-tools"><li class="page-tools-search"><input placeholder="Search" type="text" class="form-control" id="search"></input></li><li class="page-tools-print"><a href="javascript:window.print();"><span class="tool-label">Print</span><span class="glyphicon glyphicon-print"></span></a></li></ul></div></div></div><h1 id="publication-title"><span class="phrase">CashComplete™ On-Device</span> Software Development Kit Guide version 3.0.0</h1><div id="subheader-sticky-wrapper" class="sticky-wrapper"><div id="subheader"><div class="container"><div class="row"><div class="col-md-3 toc-title"><h2><a class="prev nav-icon hidden-lg hidden-md" href="UUID-636c17aa-7f0d-bffe-e77c-0ffda4bd3d3c.html"><span class="glyphicon glyphicon-chevron-left"></span> </a><a href="#toc" class="hidden mobile-nav-toggle"><span class="glyphicon glyphicon-list"></span>Table of Contents</a><span class="toc-label">Table of Contents</span><a class="next nav-icon hidden-lg hidden-md" href="UUID-f5224b30-6ab9-7d7e-2758-993c7718b233.html"><span class="glyphicon glyphicon-chevron-right"></span> </a></h2></div><div class="col-md-9 breadcrumb-container"><ul class="breadcrumb"><li class="breadcrumb-link"><span class="glyphicon glyphicon-home"></span> <a href="index-en.html"><span class="phrase">CashComplete™ On-Device</span> Software Development Kit Guide version 3.0.0</a></li><li class="breadcrumb-link"><a href="UUID-a90722ac-fd27-8578-43bf-25ec725be647.html">CashComplete™ On-Device Software Development Kit Guide</a></li><li class="breadcrumb-link"><a href="UUID-83b41fe1-9cbd-ff16-c99f-02f4473d914a.html">SDK 2.0.0</a></li><li class="breadcrumb-node">SDK 2.0.0 - miscellaneous information</li></ul></div></div></div></div></div><div id="main-content"><div class="container"><div class="row"><div class="col-md-3 toc-container" id="toc-wrapper"><div id="toc-placeholder"><ul class="toc"><li><a href="UUID-a90722ac-fd27-8578-43bf-25ec725be647.html" class="topic-link"><span class="glyphicon glyphicon-chevron-right"></span> CashComplete™ On-Device Software Development Kit Guide</a><ul><li><a href="UUID-f95b3142-bdb2-0879-4dc9-5f0daac9b0bb.html" class="topic-link">User license agreement for PayComplete software</a></li><li><a href="UUID-2818c4e4-7c3e-a7a2-9a52-7769bcbf2f2f.html" class="topic-link">CashComplete™ On-Device and SDK compatibility matrix</a></li><li><a href="UUID-d2936ece-4207-e9a7-4c18-02fdf9b58ec2.html" class="topic-link">SDK documentation</a></li><li><a href="UUID-448d6bf9-75b2-362a-4278-c415bfd6b198.html" class="topic-link"><span class="glyphicon glyphicon-chevron-right"></span> Getting started with JDK</a><ul><li><a href="UUID-9cdaf9cd-b405-3fd4-3756-857e1618153d.html" class="topic-link">Setting up the JDK workspace</a></li><li><a href="UUID-9fc1b8c2-e957-b10b-391c-8751a2dde4f2.html" class="topic-link">Implementing a JDK plug-in</a></li><li><a href="UUID-9bd9d62b-dab7-4f0f-8bff-e7575d67d5ed.html" class="topic-link">Compiling a JDK plug-in</a></li><li><a href="UUID-e88e8bfa-591a-6c32-3131-970e449fafc9.html" class="topic-link">Installing a JDK plug-in</a></li></ul></li><li><a href="UUID-d55347a6-a74a-871d-4e52-d5ae920984f8.html" class="topic-link"><span class="glyphicon glyphicon-chevron-right"></span> Getting started with Eclipse</a><ul><li><a href="UUID-7dc0d9cc-a870-58bd-707a-d9dc282095be.html" class="topic-link">Setting up the Eclipse workspace</a></li><li><a href="UUID-d2b1e921-9643-0d47-6514-b50506884804.html" class="topic-link">Implementing an Eclipse plug-in</a></li><li><a href="UUID-b71af4e8-8c9f-348f-b545-d8ab425b999f.html" class="topic-link">Compiling an Eclipse plug-in</a></li><li><a href="UUID-a7d5b6d7-94d7-6e45-4e73-502014e5f079.html" class="topic-link">Installing an Eclipse plug-in</a></li></ul></li><li><a href="UUID-7318a2d9-4028-1f8d-f5c5-56a7166ed74d.html" class="topic-link"><span class="glyphicon glyphicon-chevron-right"></span> Inside the SDK</a><ul><li><a href="UUID-a42da773-7b3b-0d4b-ad89-0a6fe86e2fe5.html" class="topic-link">Compiling an SDK plug-in</a></li><li><a href="UUID-e77b5766-58ad-3def-4fc8-bf97e71004ed.html" class="topic-link">Installing an SDK plug-in</a></li><li><a href="UUID-c854a932-408e-e97c-bdb6-a2eb0d880e28.html" class="topic-link">SDK architecture</a></li><li><a href="UUID-964d2e7f-09f7-fa43-321b-b67c706e600c.html" class="topic-link">SDK flows</a></li><li><a href="UUID-2ac7e401-fef8-9b3c-2332-ec56efd8ceb3.html" class="topic-link">CashComplete™ On-Device and plug-in flowchart</a></li><li><a href="UUID-7cd7ffff-cd2e-88dd-3058-e655930232f8.html" class="topic-link">SDK managers</a></li><li><a href="UUID-ca45f3e6-b822-6cbb-8be8-16de54a34ca5.html" class="topic-link">CashComplete™ On-Device sessions</a></li><li><a href="UUID-d722c35d-ceca-013d-c8f3-d9ba476f9919.html" class="topic-link">CashComplete™ On-Device permissions</a></li><li><a href="UUID-cdf34923-71a5-721d-1a1f-7a1e0fc0dce6.html" class="topic-link">CashComplete™ On-Device operator service menu</a></li><li><a href="UUID-c467f34c-3db9-9860-b34f-18bf1612fa7f.html" class="topic-link">Custom device integration</a></li></ul></li><li><a href="UUID-24f67e04-0ea1-2411-fbb4-6444c10be3be.html" class="topic-link"><span class="glyphicon glyphicon-chevron-right"></span> SDK troubleshooting</a><ul><li><a href="UUID-5061e5d4-ffa7-293a-474f-e9f827119caa.html" class="topic-link">Plug-in does not seem to start</a></li><li><a href="UUID-5e85eb81-eb71-5334-cbce-f2f8fc9f2d29.html" class="topic-link">There is no button for a plug-in service</a></li><li><a href="UUID-2689cf83-1a8d-7959-8b01-db48c94ed4f1.html" class="topic-link">CashComplete™ On-Device does not seem to start</a></li><li><a href="UUID-66315ac4-fbac-fdac-3760-85189928b385.html" class="topic-link">IOJDepositManager.beginTransaction() becomes unresponsive</a></li></ul></li><li><a href="UUID-901e1ea4-0868-7aae-f60a-6bedc6ecfa0d.html" class="topic-link"><span class="glyphicon glyphicon-chevron-right"></span> SDK examples — prerequisites</a><ul><li><a href="UUID-d06944a7-6886-3d51-e69e-390225773217.html" class="topic-link">Compiling and installing examples</a></li><li><a href="UUID-ba1e99ec-4640-b4b9-0c82-2cd0bc3d569f.html" class="topic-link">Example plug-ins</a></li></ul></li><li><a href="UUID-bb541365-4925-7f31-7db5-27b9902aeeac.html" class="topic-link">SDK 3.0.0 - configuration handling</a></li><li><a href="UUID-83b41fe1-9cbd-ff16-c99f-02f4473d914a.html" class="topic-link"><span class="glyphicon glyphicon-chevron-right"></span> SDK 2.0.0</a><ul><li><a href="UUID-d5773f11-97c2-ddc9-ef78-fed8029fd98f.html" class="topic-link">New user interface framework</a></li><li><a href="UUID-636c17aa-7f0d-bffe-e77c-0ffda4bd3d3c.html" class="topic-link">Known flows launching process</a></li><li><a href="UUID-0aa70923-d132-3015-a381-2af11f2c5ef7.html" class="topic-link">SDK 2.0.0 - miscellaneous information</a></li></ul></li><li><a href="UUID-f5224b30-6ab9-7d7e-2758-993c7718b233.html" class="topic-link">Icons for services</a></li><li><a href="UUID-28d0d578-3fa4-4bc2-cb29-0f487a077613.html" class="topic-link"><span class="glyphicon glyphicon-chevron-right"></span> Purchases, payments, and kiosks</a><ul><li><a href="UUID-8398b260-6cfe-d571-f922-1cac53f59915.html" class="topic-link">CashComplete™ On-Device purchases</a></li><li><a href="UUID-7311a90b-969c-17e6-cc79-2c1844c91ce1.html" class="topic-link">Kiosk application — workflow</a></li><li><a href="UUID-9327879b-213e-e89b-9407-e2701d5f302d.html" class="topic-link">Advanced kiosk features</a></li><li><a href="UUID-2558a1cc-0b30-bc42-a498-0eb806eb80eb.html" class="topic-link">Purchase accounting</a></li></ul></li><li><a href="UUID-8c537626-5f5c-af1d-46e8-7c6feb1edec1.html" class="topic-link">Revision history</a></li></ul></li></ul></div></div><div class="col-md-9 content-container" id="content-wrapper"><a accesskey="p" id="header-navigation-prev" class="pull-left prev visible-lg visible-md" href="UUID-636c17aa-7f0d-bffe-e77c-0ffda4bd3d3c.html"><span class="glyphicon glyphicon-circle-arrow-left"></span>Prev</a><a accesskey="n" id="header-navigation-next" class="pull-right next visible-lg visible-md" href="UUID-f5224b30-6ab9-7d7e-2758-993c7718b233.html">Next<span class="glyphicon glyphicon-circle-arrow-right"></span></a><div id="topic-content"><section xml:lang="en" lang="en" dir="ltr" class="section" data-origin-id="UUID-58c6aba0-bc53-4490-4c1c-3fcc947c17c6" data-publication-date="" id="UUID-0aa70923-d132-3015-a381-2af11f2c5ef7"><div class="titlepage"><div><div class="title"><h4 class="title">SDK 2.0.0 - miscellaneous information</h4></div></div></div><h5 id="UUID-0aa70923-d132-3015-a381-2af11f2c5ef7_bridgehead-idm232091597200322" class="bridgehead">Permissions</h5><p>Examples: CustomInfoDeposit and TableEditor</p><p>Previously, the only way to check if a user had a certain permission was to execute the hasPermission() method on IOJUser. However, some permissions are parameterized, such as “FREE_FLOAT_AMOUNT_LIMIT:1000”, and in some cases you don’t know what string to use (you can’t call with all possible values in the previous example).</p><p>To resolve this problem, the getPermissions() method was introduced. You supply a prefix and get all enabled permissions for the user that starts with the prefix. In the above example, you can supply “FREE_FLOAT_AMOUNT_LIMIT:” as a prefix and will then get all enabled permissions for the user that starts with that prefix. For more information on the usage, see the TableEditor example.</p><p>Two other new permission methods in IOJUser are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>blockPermission()</p></li><li class="listitem"><p>unblockPermission()</p></li></ul></div><p>These methods temporarily hide a user's permission so that it appears like that user doesn’t have the permission. This feature can be useful for “hijacking” a flow where you want to replace a standard flow with your own flow. For more information on the CustomInfoDeposit example, see Known flows launching process.</p><h5 id="UUID-0aa70923-d132-3015-a381-2af11f2c5ef7_bridgehead-idm232091605539022" class="bridgehead">Custom data</h5><p>Example: CustomInfoDeposit</p><p>If you wanted to provide custom information with a transaction prior to SDK 2.0.0, you needed to supply a parameter called <span class="emphasis"><em>extra data</em></span> — a string limited to 255 characters. This string was stored with the transaction and sent with the RM protocol.</p><p><span class="phrase">CashComplete™ On-Device</span> doesn’t use this extra data and, for that reason, it is usually not implemented in enterprise software solutions using the RM protocol. <span class="phrase">CashComplete™ On-Device</span> uses something called <span class="emphasis"><em>custom data</em></span> instead. Custom data can similarly be used to supply custom strings with a transaction. Instead of providing just a single string, you provide a map with key-value pairs that allows more custom information.</p><p>With SDK 2.0.0, you can use custom data directly from the SDK. The extra data parameter is still available for backwards compatibility.</p><p>Another difference is that you don’t supply the custom data parameter when you create the transaction like you did with extra data. Instead, you set the custom data parameter on a user object. It is then used for all transactions created on that user in this session, whether they are created by the SDK plugin or by <span class="phrase">CashComplete™ On-Device</span>. This means that you can set custom data on a user in a logged in flow that will be used by the native <span class="phrase">CashComplete™ On-Device</span> flows, and it can also be used when launching a standard flow from the SDK plugin. For more information, see Known flows launching process.</p><h5 id="UUID-0aa70923-d132-3015-a381-2af11f2c5ef7_bridgehead-idm232091607279253" class="bridgehead">Money mix algorithm</h5><p>Examples: Exchange and DispenseValue</p><p>Sometimes you want to create an optimal mix of coins and notes to dispense a certain value. At first, this may seem like an easy algorithm. Just take as many of the highest available denomination as possible, without exceeding the value, and then proceed with the second-highest denomination, and so on. This was how an optimal mix of coins and notes to dispense a certain value was implemented in the DispenseValue example prior to SDK 2.0.0.</p><p>The problem with this algorithm is that, if you want to create a mix for, for example, €110 and all you have are €50 notes and €20 notes. In this case, you take 2 €50 notes, reaching €100, but then you have no possibility of fulfilling the last €10. It might even be that the system is full of 1 cent coins, in which case you will dispense 2 €50 notes and 1000 coins, when you could have reached the full amount with 1 €50 note and 3 €20 notes.</p><p>In SDK 2.0.0, there is a built-in algorithm that takes these cases into account as well as the available cash in the machine and all built-in dispense limits.</p><p>Just call createMix() in IOJDispenseManager and supply a money bag that has the value you want to split. This value is taken as a money bag even though it is just a value you want to split. The reason for this is that it is often convenient to use a money bag, which handles different currencies automatically. It's only the total value (per currency) of the money bag that is used. The result of the split is given as an OJMixResult. This holds the exact mix, if an exact mix could be found, and also the best underpay and the best overpay. The best underpay and the best overpay are usually just used if an exact mix couldn’t be found.</p><h5 id="UUID-0aa70923-d132-3015-a381-2af11f2c5ef7_bridgehead-idm232091608761909" class="bridgehead">Use <span class="phrase">CashComplete™ On-Device</span> trace files</h5><p>Example: CustomInfoDeposit</p><p>When you develop software, you often want to write trace log files from the program, both to debug while developing, but also to analyze error reports from the field. In SDK 2.0.0, it is possible for an SDK plugin to log into the native trace files of <span class="phrase">CashComplete™ On-Device</span> (that is, <code class="filename">/CashComplete/trace/orchardj.log</code>). <span class="phrase">CashComplete™ On-Device</span> uses a third-party library from Apache called log4j to write these trace files.</p><p>Call createLogger() in IOJSystemManager to get an object of type IOJLogger that you can use to log to the <span class="phrase">CashComplete™ On-Device</span> trace files. When you call createLogger(), you supply the SDK class using the logger. This class name is written in the log rows and can be used to find the trace that is relevant for you.</p><h5 id="UUID-0aa70923-d132-3015-a381-2af11f2c5ef7_bridgehead-idm232091610294857" class="bridgehead">Use <span class="phrase">CashComplete™ On-Device</span> configurations</h5><p>Example: TableEditor</p><p>If you require configurations for your plug-in, you no longer need to write your own file format and file parsing for those configurations. Instead you can make use of the <span class="phrase">CashComplete™ On-Device</span> configuration files.</p><p>The configuration file called <code class="filename">com.scancoin.sdk.engine</code> is already there. This is where the plugin is activated. You can add your custom configurations to this file and simply ask the SDK API for the configurations.</p><p>Call getConfiguration() in IOJSystemManager to get a Properties object containing all the configurations belonging to your plugin. To determine what configurations that belongs to you, you supply the main class of your plugin. The fully qualified name of that class should be used as prefix in the configuration file. For example, if the main plugin class, which is supplied to getConfiguration()), is called com.mycom.myplugin.MyPlugin and you have a property called FlowTimeout, then it should be written like this in the <code class="filename">com.scancoin.sdk.engine</code>:</p><pre class="programlisting">com.mycom.myplugin.MyPlugin.FlowTimeout = 1000</pre><p>In the returned Properties object, it is just called FlowTimeout.</p><div class="informalexample seealso"><p>See also</p><p><a class="xref" href="UUID-83b41fe1-9cbd-ff16-c99f-02f4473d914a.html" title="SDK 2.0.0"><span class="xreftitle">SDK 2.0.0</span></a></p></div></section><div class="footer-content"><div class="additional-links"></div></div><footer></footer></div></div></div></div></div></div></body></html>
